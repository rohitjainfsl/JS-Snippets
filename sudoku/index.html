<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sudoku</title>
    <link rel="stylesheet" href="sudoku.css" />
  </head>
  <body>
    <div id="wrapper">
      <div id="grid">
        <div class="sudoku"></div>
      </div>

      <button>Submit Solution</button>
    </div>

    <script>
      const url =
        "https://sudoku-generator1.p.rapidapi.com/sudoku/generate?seed=1337";
      const solution =
        "https://sudoku-generator1.p.rapidapi.com/sudoku/solve?puzzle=..3465..2.862..7..92...7.1.6....234..15....69.42..8.......364717..5.49.3..987.5..";
      const options = {
        method: "GET",
        headers: {
          "X-RapidAPI-Key":
            "109c31cdf7mshd5a3d4ba3816a91p14e9b8jsn4cae3a0c2b8b",
          "X-RapidAPI-Host": "sudoku-generator1.p.rapidapi.com",
        },
      };

      async function fetchData() {
        try {
          const response = await fetch(url, options);
          const result = await response.json();
          console.log(result);
          fillSudokuBoard(result.puzzle);
        } catch (error) {
          console.error(error);
        }
      }

      function fillSudokuBoard(numbers) {
        const boxes = document.querySelectorAll(".sudoku .box");
        numbers.split("").forEach((number, index) => {
          if (number === ".") {
            const input = document.createElement("input");
            input.type = "text";
            input.pattern = "\d.";
            input.maxLength = "1";
            input.addEventListener("keyup", checkForNumber);
            boxes[index].append(input);
          } else {
            boxes[index].classList.add("filled");
            boxes[index].innerHTML = number;
          }
        });
      }

      function generateSudokuBoard(puzzle) {
        const sudokuDiv = document.querySelector(".sudoku");
        let counter = 1;
        for (let i = 0; i < 81; i++) {
          const box = document.createElement("div");
          box.classList.add("box");
          if (counter % 3 === 0) box.style.borderRight = "3px solid";
          sudokuDiv.append(box);
          counter++;
        }
      }

      function checkForNumber(e) {
        if (e.keyCode < 48 || e.keyCode > 57) {
          e.target.value = "";
        }
      }

      generateSudokuBoard();
      fetchData();
    </script>
  </body>
</html>
